\section{Data Structure}
\label{sec:DataStructure}

\subsection{General MAUS, Monte Carlo and DAQ data structures}
\label{subsec:GeneralDataStructure}
A simplified schematic of the tracker data structure, with the relevant entries from the more general MAUS data structure, is shown in figure~\ref{figureDataStructure}.  All the objects listed represent container classes for different parts of the simulation, raw data and reconstruction.  The top level object is known as the spill, which contains the data associated with the burst of particles produced by one dip of the pion production target.  Within the spill the data is split into three branches: real data from the DAQ; Monte Carlo data generated by simulation; and reconstruction data, which is formed from data in either the real or Monte Carlo branches. 

The reconstruction code makes no direct reference to the Monte Carlo information, and has no way to distinquish real from simulated data, thus ensuring that they are treated equally.  The real DAQ data is held in an object known as TrackerDAQ.  This is then further split depending on where the raw data originated; if from the full MICE DAQ then it is stored in a VLSB object or, if the data originated in a cosmic-ray test DAQ, in a VLSB\_C object.

\begin{figure}[bt]
  \begin{center}
    \includegraphics[width=25pc]{04-DataStructure/DataStructureSimple2016.pdf}
    \caption{\label{figureDataStructure}The tracker software data structure, and relevant MAUS data structure.  The spill is the top level object below which data is split into real data, MC data and reconstruction sides. When an object owns the memory of a set of other objects, these are held as standard vectors of pointers. When an object contains cross links to another set of objects, without owning their memory, these are held as a ROOT TRefArray of pointers. SPR = Straight Pattern Recognition, HPR = Helical Pattern Recognition.}
  \end{center}
\end{figure}

The Monte Carlo event holds data on scifi hits produced by tracks passing through sensitive volumes (the fibre planes) and any associated noise hits originating in those planes. The scifi hit is implemented as a class based on the generic Hit class template from which all the different MICE Monte Carlo detector hit classes are derived (see~\cite{MausPaper}).  Other relevant data held in the Monte Carlo event, though not part of the tracker data structure, includes simulated track objects which hold the generated information on position, momentum and particle type.  Such data is used to evaluate the reconstruction performance against the generated data (see section~\ref{sec:Performance}).

\subsection{Tracker reconstruction data structure}
\label{subsec:TrackerReconDataStructure}
The reconstructed data for the tracker is held in the SciFiEvent class.  This contains C++ standard library vectors of the following container classes that represent the higher level reconstructed tracker data:
\begin{itemize}
  \item ``SciFiDigits'' represent the digitisation of a detector channel response to an incident track;
  \item ``SciFiClusters'' represent groups of neighbouring Digits arising from the same particle crossing multiple channels;
  \item ``SciFiSpacepoints'' group Clusters from adjacent detector planes to give a real space position in terms of $(x, y, z)$;
  \item ``SciFiStraightPRTracks'' group together Spacepoints from different tracker stations when the originating track is straight (i.e. when the enclosing field is off). %The track parameters given in eqn.~\ref{eqn:StraightTrackParameters} are also stored;
  \item ``SciFiHelicalPRTracks'' group together Spacepoints from different tracker stations when the originating track is helical (i.e. when the enclosing field is on). %The track parameters given in eqn.~\ref{eqn:HelicalTrackParameters} are also stored;
  \item ``SciFiTracks'' hold the final Kalman fit parameters of the particle track. SciFiTracks also contain SciFiTrackPoints, which hold the fit parameters at each detector plane, including the momentum and position of the track.
\end{itemize}

\subsection{Cross links and the Monte Carlo - Reconstruction bridge}
\label{subsec:CrossLinksAndMCBridge}
Each higher level object also contains cross links in the form of pointers back to the objects within the SciFiEvent which were used to create it; thus Clusters contain pointers to Digits, Spacepoints to Clusters, Pattern Recognition Tracks to Spacepoints, and SciFiTracks to Pattern Recognition Tracks. In this manner all higher level objects can be traced back fully to the original Digits.  

In the case of a Monte Carlo run the Digits themselves are linked via an ID number and lookup table back to the Monte Carlo hits used to produce them. The ID is defined as \textit{tspccc}, where \textit{t} is the tracker number, \textit{s} is the station number, \textit{p} is the plane number, and \textit{c} is the channel number.  This structure means the reconstruction branch has no direct reference to the Monte Carlo data.